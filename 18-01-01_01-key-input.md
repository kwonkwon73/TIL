## 키보드 처리

---

강의 3강. 게임의 기본 구조\(2/3\)

* [https://youtu.be/WkShF50A0cs](https://youtu.be/WkShF50A0cs)

3-4 키보드 처리

* 키보드 처리를 위한 함수
  * [http://nowcampus.tistory.com/entry/2%EC%9E%A5-%ED%95%A8%EC%88%98?category=655340](http://nowcampus.tistory.com/entry/2%EC%9E%A5-%ED%95%A8%EC%88%98?category=655340)
  * `_kbhit()`
    * 키보드가 눌렸을 때, 0 이외의 값 반환
  * `_getch()`
    * 화면에는 입력된 값 출력하지 않고, 키 값을 가져오는 함수
  * Update, Render 무한 반복 전에 키 처리 



3-5 게임 프로그래밍 용어

* primary buffer \(전위 버퍼\)
  * 버퍼 - 메모리
  * 메모리와 모니터 1:1 대응
  * 0xa000:0000 그래픽 카드의 메인 메모리 시작 주소
* back buffer \(후위 버퍼\)
  * 시스템 메모리보다 그래픽카드 메모리에 생성 
  * 전위 버퍼와 동일한 특성, 화면에 출력하는 메모리
* double buffering \(이중 버퍼링\)
  * 전위 버퍼에 그리면 화면에 바로바로 출력, 다음 장면 출력 안 된다. 그래서 전위 버퍼에 화면 출력되는 동안 후위 버퍼에 다음 장면 그려놓고 이 내용을 전위 버퍼로 복사하는 방법
    * 복사 하기 위해서는 메모리 타입, 형식 같아야한다. 
  * 코딩 하다보면 화면에 깜박임 발생하는 이유
    * 모니터는 하드웨어고 메모리는 전자적으로 처리해서 하드웨어가 이 메모리의 처리 속도\(그리는 속도\)를 따라가지 못함
    * 그래서 모니터는 전위 버퍼 내용 출력하고 있는데, 후위 버퍼 내용 출력될 수도 있고, 이러면 안되니까 모니터에서 전위 버퍼에 있는 내용 다 출력했는지 체크 한 다음에 후위 버퍼 내용 복사하여 전위 버퍼-&gt; 모니터 출력이 되게 해야 함
    * 근데 단점, 복사복사 하다보니 시간이 많이 걸린다. 
* page flipping \(페이지 전환\)
  * 더블 버퍼링 단점 보완하기 위해 고안 
  * 메모리를 바꾸는 것보다\(카피, 더블 버퍼링\) 메모리 가리키는 주소 바꾸는게 훨씬 빨리 처리할 수 있다! 
  * 백버퍼가 전위버퍼 역할 하고, 전위 버퍼가 백버퍼 역할 하도록 하는게 이 기법
    * OpenGL, DirectX에서 등장한다!



3-6 프레임워크

* 코드를 작성하기 위해 제공되는 프로그래밍 틀
  * DirectX
* 잘 만들어진 프레임워크는 팀 전체의 코드 통합과 향상을 가져온다. 
  * 에러 있어서 보려고 하니 프로그래머마다 코드 구조가 다르면 처음부터 전부 살펴봐야 함
  * 모두 같은 구조 안에서 코드를 작성하면 여기서 작성한 내용 저기서도 쓸 수 있게 됨, 효율성 증가 
  * 각자 만든 코드를 통합할 때 각각 다른 환경, 구조로 작성했다면 이거 또 환경 설정하고, 통합하고, 테스트 하는게 일 ㄷㄷㄷ
  * 근데 단점도 있음, 프레임워크를 쓰면 전체 구조가 어떻게 돌아가는지 애매한 때가 있음
  * 어쨌든 사용할 수밖에 없음
* 프레임워크 파일\(Screen\) 제공되고, 거기 있는 함수 쓰려면 `#include 'Screen.h"` 헤더 파일 불러와야 함
  * 완전 파이썬 라이브러리 불러오는거 생각남
  * 이제 `#include 어쩌구`처음만큼 낯설지 않은 듯 ㅋㅋ 
  * &lt;&gt;랑 "" 차이가 궁금했는데 &lt;&gt;는 내부 라이브러리고 ""는 외부 라이브러리 불러올 때 쓰는건가?
  * 코드에 대기 코드 없다는 것 - 동기화 시간으로 판단한다는 것까지 알 수 있다.

3-7 분할컴파일

* 파일 분리하면 전역 변수 같은거 섞일 위험도 있는데 이런 부분도 좀 해결해 줄 수 있음! 
* 내용 보는데 아직은 어떻게 분할 컴파일을 하고 쓸 수 있는지 잘 모르겠다 \(프로젝트 구조\) 써보면서 익혀야 될 듯
* 프레임워크 코드와 게임 코드 구분하여 프로그래밍 가능



### 키워드

* 분할 컴파일
  * 변수 관리, 프레임워크 코드/게임 코드 구분
* 키보드 처리를 위한 함수
  * `_kbhit()`
  * `_getch()`
* 프레임워크
  * 협업할 때, 프로젝트 규모 커질 때 장점
  * 구조

* 게임 프로그래밍 용어
  * primary buffer
  * back buffer
  * double buffering
  * page flipping

#### 미해결문제

* [ ]  프레임워크? 라이브러리? 

#### 멘탈

* 용어에서 낯선 느낌은 많이 줄은 듯 하다. 
* 노트 정리하는 것보다 실습을 좀 더 해야될텐데, 어차피 앞으로는 실습할 내용 잔뜩 나옴 ㅎㅎ
* 계속 강조되는게 구조? 하긴 이 구조 어떻게 돌아가는지 몰라서 자바스크립트 배울 때도 어려웠음
* 기본 구조 손에 익혀야 겠다. 







