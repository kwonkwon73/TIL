DDA 선분 그리기

m &gt; 1 일 때 왜 역수를 취하는지 이해가 안 되었는데, 모눈종이에 그려보니까 이해된다.

m &gt; 1 일 때도 0 &lt; m &lt;= 1 일 때처럼 dx를 1 기준으로 그리면 채우지 못한 픽셀이 생긴다.

그래서 m &gt; 1 인 기울기가 가파른 선분은 dx가 아니라 dy를 1로 y를 1씩 증가시키며 채울 픽셀을 찾아야 한다.

c++ 구현 코드는 아직 이해를 못하니까, 자바 2차원 배열을 픽셀 대신으로 콘솔에서 확인할 수 있 구현해봤다.

```java
package the.graphics;

import java.util.Scanner;

public class DDA  {
    public static void main(String[] args) {
        System.out.println("DDA Test");

        // 초기화
        int x0, y0, xEnd, yEnd; // 시작점, 끝점
        float dx, dy, m; 

        int xa, ya, xb, yb; // (xa, ya) -> (xb, yb) 즉 b = k+1, a = k 의미

        // xb, yb 계산 결과 변하는 것 보기 위함
        StringBuffer sbx = new StringBuffer();
        StringBuffer sby = new StringBuffer();

        // 콘솔에서 픽셀 대신할 2차원 좌표
        String[][] coordinate = new String[20][20];

        for (int i = 0; i < coordinate.length; i++) {
            for (int j = 0; j < coordinate.length; j++) {
                coordinate[i][j] = "[ ]";
            }
        }

        // 선분의 시작점, 끝점 좌표 입력 받기
        Scanner input = new Scanner(System.in);
        System.out.println("x0 입력 : ");
        x0 = input.nextInt();
        System.out.println("y0 입력 : ");
        y0 = input.nextInt();
        System.out.println("xEnd 입력 : ");
        xEnd = input.nextInt();
        System.out.println("yEnd 입력 : ");
        yEnd = input.nextInt();

        // dx, dy, m 구하기
        dx = xEnd - x0;
        dy = yEnd - y0;
        m = ( dy / dx ); 

        // 입력 값, 계산 결과 확인
        System.out.printf(String.format("시작점 (%s,%s), 끝 점 (%s,%s)\n", x0, y0, xEnd, yEnd));
        System.out.printf(String.format("dx : %s, dy : %s, m : %s\n", dx, dy, m));

        // DDA 선분 그리기
        if (m > 1) {

            // dy를 기준으로 계산 ( => dy가 1씩 증가할 때 dx값 구하기)
            // 처음에는 (xa, ya)가 (x0, y0)이므로 값 대입
            ya = y0; sby.append(ya + " ");
            xa = x0; sbx.append(xa + " ");


            for (int i = 0; i < dy; i++) {
                yb = ya + 1; // dy = 1일 때
                xb = Math.round(xa + (1 / m)); // dx의 값 -> 실수 정수화(반올림), m 역수 취해야 함

                sby.append(yb + " ");
                sbx.append(xb + " ");

                // 픽셀 찍기
                coordinate[ya][xa] = "[*]"; // 시작점
                coordinate[yb][xb] = "[*]";

                // 다음 점 구할 수 있도록 
                ya = yb; 
                xa = xb;

            }

        } else {
            // 0 < m <= 1일 때, dx를 기준으로 계산 ( => dx가 1씩 증가할 때 dy값 구하기)
            // 처음에는 (xa, ya)가 (x0, y0)이므로 값 대입
            xa = x0; sbx.append(xa + " ");
            ya = y0; sby.append(ya + " ");

            for (int i = 0; i < dx; i++) {
                xb = xa + 1; // dx = 1일 때
                yb = Math.round(ya + m); // dy의 값 -> 실수 정수화(반올림)

                sbx.append(xb + " ");
                sby.append(yb + " ");

                // 픽셀 찍기
                coordinate[ya][xa] = "[*]"; // 시작점
                coordinate[yb][xb] = "[*]";

                // 다음 점 구할 수 있도록 
                xa = xb;
                ya = yb;

            }            
        }


        // 콘솔에 계산 결과 그리기 (픽셀)
        System.out.println("계산 결과 -------------------------");
        System.out.println("x : " + sbx.toString());
        System.out.println("y : " + sby.toString());
        for (int i = 0; i < coordinate.length; i++) {
            for (int j = 0; j < coordinate.length; j++) {
                System.out.printf(coordinate[i][j]);
            }
            System.out.println();
        }
    }
}
```

결과 \( m &gt; 1 일 때\)

```
시작점 (1,2), 끝 점 (5,10)
dx : 4.0, dy : 8.0, m : 2.0
계산 결과 -------------------------
x : 1 2 3 4 5 6 7 8 9 
y : 2 3 4 5 6 7 8 9 10 
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][*][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][*][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][*][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][*][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][*][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][*][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][*][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][*][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][*][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
```

결과 \( 0 &lt; m &lt;= 1 일 때\)

```
시작점 (2,1), 끝 점 (10,5)
dx : 8.0, dy : 4.0, m : 0.5
계산 결과 -------------------------
x : 2 3 4 5 6 7 8 9 10 
y : 1 2 3 4 5 6 7 8 9 
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][*][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][*][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][*][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][*][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][*][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][*][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][*][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][*][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][*][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
```

시작점 `[ ]` 이 \(0, 0\)인 픽셀이다. \(픽셀 특성상 0 =&lt; x &lt; 1 이면 다 0으로 찍힌다\)

가로 x축, 좌에서 우로 증가

세로 y축, 위에서 아래로 증가함



근데 기울기가 0.5라서 그런지 누적 오차가 너무 심하다. \(실제 쓰기 어려울 정도?\)

픽셀을 찍어야되서 정수로 변환하니 y = 0.5x가 아니라 y=x 가 나왔다 -.-

